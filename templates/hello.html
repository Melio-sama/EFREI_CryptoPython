<!DOCTYPE html>
<html>
<head>
    <title>Crypto App avec clé perso</title>
</head>
<body>
    <h1>Chiffrement et Déchiffrement avec clé personnalisée</h1>

    <h2>Encrypter</h2>
    <form onsubmit="event.preventDefault(); encrypt()">
        <label for="encrypt-text">Texte :</label>
        <input type="text" id="encrypt-text" required>
        <br>
        <label for="encrypt-key">Clé Fernet (base64) :</label>
        <input type="text" id="encrypt-key" required>
        <br>
        <button type="submit">Encrypter</button>
    </form>
    <p id="encrypt-result"></p>

    <h2>Décrypter</h2>
    <form onsubmit="event.preventDefault(); decrypt()">
        <label for="decrypt-text">Texte chiffré (base64) :</label>
        <input type="text" id="decrypt-text" required>
        <br>
        <label for="decrypt-key">Clé Fernet (base64) :</label>
        <input type="text" id="decrypt-key" required>
        <br>
        <button type="submit">Décrypter</button>
    </form>
    <p id="decrypt-result"></p>

    <script>
        function encrypt() {
            const text = document.getElementById('encrypt-text').value;
            const key = document.getElementById('encrypt-key').value;
            fetch(`/encrypt/${encodeURIComponent(text)}/${encodeURIComponent(key)}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById('encrypt-result').innerText = data;
                });
        }

        function decrypt() {
            const text = document.getElementById('decrypt-text').value;
            const key = document.getElementById('decrypt-key').value;
            fetch(`/decrypt/${encodeURIComponent(text)}/${encodeURIComponent(key)}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById('decrypt-result').innerText = data;
                });
        }
    </script>
</body>
</html>
